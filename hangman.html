<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <h1>Hangman</h1>
    <p>Score:
        <span id="user-score"> 0</span>
    </p>
    <p>HP:
        <span id="user-hp">6</span>
    </p>
    <p>Word:
        <span id="user-display"></span>
    </p>
    <p>Checked:
        <span id="user-checked"></span>
    </p>
    <script>
        var hpShow = document.getElementById("user-hp");
        var displayShow = document.getElementById("user-display");
        var checkedShow = document.getElementById("user-checked");
        var scoreShow = document.getElementById("user-score");
        var hp = Math.floor(6);
        var match = Math.floor(0); //how many letters of the words the player got right
        var score = Math.floor(0); 
        var display = []; //the array to save the letters already gotten right
        var checked = []; // to save all gussed letters
        var answer = [];
        var wordBank = ["HTML", "CSS", "JAVASCRIPT", "BOOTSTRAP", "ARRAYS", "OBJECT", "METHOD", "FUNCTION", "SCOPE", "CLASS", "SYNTAX"];
        var wordsYouGotRight

        function newWord() {
            if (wordBank.length != 0) {
                display =[];
                var rand = Math.floor(Math.random() * wordBank.length);
                console.log(rand);
                //var
                answer = wordBank[rand].split("");
                wordBank.splice(rand, 1);
                match = answer.length;
                console.log(match);
                for (i = 0; i < answer.length; i++) {
                    display.push("_");
                }
                displayShow.textContent = display;
                checked = [];
                checkedShow.textContent = checked;
            }
            else {
                setTimeout(function () { location.reload(true); }, 2000);
                document.write("YOU WIN");
            }
        }
        //initialize game
        newWord();
        hpShow.textContent = hp;
        console.log(wordBank);
        console.log(checked);
        console.log(display);
        console.log(answer);
    </script>

    <script>
        document.onkeydown = function (event) {
            var keyPressed = String.fromCharCode(event.keyCode);
            if (event.keyCode < 91 && event.keyCode > 64) {
                //console.log(event.keyCode);
                //console.log(keyPressed);
                if (checked.indexOf(keyPressed) == -1) {
                    checked.push(keyPressed);
                    checkedShow.textContent = checked;
                    //console.log(checked);
                    if (answer.indexOf(keyPressed) != -1) {
                        //console.log("yay");
                        for (var i = 0; i < answer.length; i++) {
                            if (answer[i] == keyPressed) {
                                display[i] = keyPressed;
                                match--;
                            }
                            console.log(match);
                            displayShow.textContent = display;

                        }
                        if (match == 0) {
                            score++;
                            scoreShow.textContent = score;
                            setTimeout(function(){newWord();},2500);
                        }
                    } 
                    else {
                        hp--;
                        hpShow.textContent = hp;
                        if (hp < 1) {
                            setTimeout(function () { location.reload(true); }, 2000);
                            document.write("YOU LOSE");
                        }
                        //console.log(hp);

                    }
                }
                //console.log(checked);
            }

        }





    </script>
</body>

</html>